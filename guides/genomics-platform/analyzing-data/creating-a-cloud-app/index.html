



<!doctype html>
<html lang="en" class="no-js">
  <head>
    <script src="//assets.adobedtm.com/launch-EN942f79c83ff84c10a45b4856a85eaccb.min.js" async></script>
    <script>!function(e,a,t,n,g,c,o){e.GoogleAnalyticsObject=g,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=1*new Date,c=a.createElement(t),o=a.getElementsByTagName(t)[0],c.async=1,c.src="https://www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o)}(window,document,"script",0,"ga"),ga("create","UA-107924368-1","auto"),ga("send","pageview")</script>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-4.6.3">
    
    
      
        <title>Creating your own Workflow - St. Jude Cloud Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/application.7d2ef1ff.css">
      
      
    
    
      <script src="../../../../assets/javascripts/modernizr.eca31fed.js"></script>
    
    
      
    
    <link rel="stylesheet" href="../../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../../css/extra.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#creating-a-cloud-application" tabindex="0" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../../.." title="St. Jude Cloud Documentation" aria-label="St. Jude Cloud Documentation" class="md-header-nav__button md-logo">
          
            <img alt="logo" src="../../../../images/stjude-logo-child-white.png" width="40" height="28">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              St. Jude Cloud Documentation
            </span>
            <span class="md-header-nav__topic">
              
                Creating your own Workflow
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" aria-label="search" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/stjudecloud/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    stjudecloud/docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../../.." class="md-tabs__link">
        Overview
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../covid-19/" class="md-tabs__link">
          COVID-19 Quickstart
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../" class="md-tabs__link md-tabs__link--active">
          Genomics Platform
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../pecan/" class="md-tabs__link">
          PeCan
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../visualization-community/" class="md-tabs__link">
          Visualization Community
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../studies/studies-about/" class="md-tabs__link">
          Studies
        </a>
      
    </li>
  

      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main" role="main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../../.." title="St. Jude Cloud Documentation" class="md-nav__button md-logo">
      
        <img alt="logo" src="../../../../images/stjude-logo-child-white.png" width="48" height="48">
      
    </a>
    St. Jude Cloud Documentation
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/stjudecloud/docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    stjudecloud/docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../../.." title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../ecosystem/" title="About our Ecosystem" class="md-nav__link">
      About our Ecosystem
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      COVID-19 Quickstart
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        COVID-19 Quickstart
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/" title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/upload-local/" title="Data upload (local)" class="md-nav__link">
      Data upload (local)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/upload-cluster/" title="Data upload (HPC)" class="md-nav__link">
      Data upload (HPC)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/creating-a-cloud-app-covid/" title="Creating a cloud app" class="md-nav__link">
      Creating a cloud app
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/interactive-node/" title="Interactive nodes" class="md-nav__link">
      Interactive nodes
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../covid-19/visualizing-ngs-data/" title="Visualizing NGS data" class="md-nav__link">
      Visualizing NGS data
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Genomics Platform
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Genomics Platform
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../accounts-and-billing/" title="Accounts and Billing" class="md-nav__link">
      Accounts and Billing
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-3" type="checkbox" id="nav-4-3">
    
    <label class="md-nav__link" for="nav-4-3">
      Requesting Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-3">
        Requesting Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../requesting-data/about-our-data/" title="About our Data" class="md-nav__link">
      About our Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../requesting-data/data-request/" title="Making a Data Request" class="md-nav__link">
      Making a Data Request
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../requesting-data/how-to-fill-out-DAA/" title="Filling Out a Data Access Agreement" class="md-nav__link">
      Filling Out a Data Access Agreement
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../requesting-data/glossary/" title="About our Decision Process & Terminology" class="md-nav__link">
      About our Decision Process & Terminology
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4">
    
    <label class="md-nav__link" for="nav-4-4">
      Managing Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        Managing Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../managing-data/working-with-our-data/" title="Managing Data Overview" class="md-nav__link">
      Managing Data Overview
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../managing-data/data-transfer-app/" title="Uploading/Downloading Data" class="md-nav__link">
      Uploading/Downloading Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../managing-data/how-to-fill-out-Extension/" title="Renewing your Data Access" class="md-nav__link">
      Renewing your Data Access
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5" checked>
    
    <label class="md-nav__link" for="nav-4-5">
      Analyzing Data
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        Analyzing Data
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../command-line/" title="Command Line Interaction" class="md-nav__link">
      Command Line Interaction
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../running-sj-workflows/" title="Running our Workflows" class="md-nav__link">
      Running our Workflows
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4-5-3" type="checkbox" id="nav-4-5-3">
    
    <label class="md-nav__link" for="nav-4-5-3">
      SJ Cloud Workflows
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="3">
      <label class="md-nav__title" for="nav-4-5-3">
        SJ Cloud Workflows
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../neoepitope/" title="NeoepitopePred" class="md-nav__link">
      NeoepitopePred
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../chipseq/" title="ChIP-Seq Peak Calling" class="md-nav__link">
      ChIP-Seq Peak Calling
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../rapid-rnaseq/" title="Rapid RNA-Seq Fusion Detection" class="md-nav__link">
      Rapid RNA-Seq Fusion Detection
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../warden/" title="WARDEN Differential Expression Analysis" class="md-nav__link">
      WARDEN Differential Expression Analysis
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mutational-signatures/" title="Mutational Signatures" class="md-nav__link">
      Mutational Signatures
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Creating your own Workflow
      </label>
    
    <a href="./" title="Creating your own Workflow" class="md-nav__link md-nav__link--active">
      Creating your own Workflow
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-application" class="md-nav__link">
    Writing the Application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting started
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-project" class="md-nav__link">
    Creating the Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrating-tools-and-packages" class="md-nav__link">
    Integrating Tools and Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging-fastqc" class="md-nav__link">
    Packaging FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" class="md-nav__link">
    Installing Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-fastqc" class="md-nav__link">
    Calling FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-files" class="md-nav__link">
    Uploading Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-your-app" class="md-nav__link">
    Building Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-your-app" class="md-nav__link">
    Running Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-completion" class="md-nav__link">
    Job Completion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#similar-topics" class="md-nav__link">
    Similar Topics
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      PeCan
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        PeCan
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../pecan/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../pecan/pecan-pie/" title="Pecan PIE" class="md-nav__link">
      Pecan PIE
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Visualization Community
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Visualization Community
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../visualization-community/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../visualization-community/proteinpaint/" title="ProteinPaint" class="md-nav__link">
      ProteinPaint
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../visualization-community/genomepaint/" title="Genome Paint" class="md-nav__link">
      Genome Paint
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Studies
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Studies
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../studies/studies-about/" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../studies/sickle-cell/" title="Sickle Cell" class="md-nav__link">
      Sickle Cell
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../faq/" title="Frequently Asked Questions" class="md-nav__link">
      Frequently Asked Questions
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../../citing-stjude-cloud/" title="Citing St. Jude Cloud" class="md-nav__link">
      Citing St. Jude Cloud
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data" class="md-nav__link">
    Data
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-the-application" class="md-nav__link">
    Writing the Application
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#requirements" class="md-nav__link">
    Requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting started
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#creating-the-project" class="md-nav__link">
    Creating the Project
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrating-tools-and-packages" class="md-nav__link">
    Integrating Tools and Packages
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging-fastqc" class="md-nav__link">
    Packaging FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installing-dependencies" class="md-nav__link">
    Installing Dependencies
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#calling-fastqc" class="md-nav__link">
    Calling FastQC
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#uploading-files" class="md-nav__link">
    Uploading Files
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#building-your-app" class="md-nav__link">
    Building Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-your-app" class="md-nav__link">
    Running Your App
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#job-completion" class="md-nav__link">
    Job Completion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#similar-topics" class="md-nav__link">
    Similar Topics
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/stjudecloud/docs/edit/master/docs/guides/genomics-platform/analyzing-data/creating-a-cloud-app.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="creating-a-cloud-application">Creating a Cloud Application<a class="headerlink" href="#creating-a-cloud-application" title="Permanent link">&para;</a></h1>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>If you came here from the remote work quickstart guide, you can use <a href="../../../covid-19/creating-a-cloud-app-covid/">this link</a> to quickly jump back to your place in that guide.</p>
</div>
<p>This guide will take you through the process of writing an application for working with and manipulating the St. Jude data you've requested. By creating your own application, you will be able to wrap genomic tools and packages from external sources, as well as any tool or application you might have written yourself.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The complete contents of this guide is hosted on the <a href="https://github.com/stjudecloud/cloud-app-tutorial">St. Jude App Tutorial</a> repository on GitHub. Feel free to clone the repository and use it as a reference while following this tutorial or try building the application and running it on your own project.</p>
</div>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permanent link">&para;</a></h2>
<p>The biggest difference between running an application in the cloud (as opposed to running it in a local environment) is the way we access that data and manipulate it. Writing and running your own cloud application grants numerous benefits. It allows you to submit numerous jobs in parallel, access your data from anywhere with an Internet connection, and utilize resources and compute power at a fraction of the cost (when compared to building your own infrastructure).</p>
<p>Writing your own application will allow you to wrap custom tools to manipulate any data that you have previously requested. When you run your application, the request gets sent to a virtualized Linux container (Ubuntu 14.04 or 16.04) where any dependencies are installed and where your script will be run. Any tools or packages that you include (either through the included package managers, or bundled together in your project) will be available locally on the virtual Linux machine.</p>
<p>However, there are differences in how we manage our data. When a job is submitted, a virtual machine is provisioned specifically for that job request, meaning that it is spun up at-will or when needed. It also implies that once the job has completed, the virtual machine will be reprovisioned or deleted. Any job output or data must be uploaded back to the project space.</p>
<p>In this tutorial, we will be wrapping the <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/">FastQC</a>, a quality control tool for raw sequence data, into our application. This will allow us to run FastQC on any of the St. Jude next generation sequencing data in the cloud. For specific information about how FastQC works, please refer to the <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/Help/">FastQC documentation</a>.</p>
<h2 id="data">Data<a class="headerlink" href="#data" title="Permanent link">&para;</a></h2>
<p>For this tutorial I have requested the PCGP dataset, and once my access request has been approved, my project directory space will look like the following.</p>
<p><img alt="" src="../../../../images/guides/genomics-platform/analyzing-data/creating-a-cloud-app-0.png" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you do not yet have data in a DNAnexus project, you may request data from St. Jude Cloud by following the directions <a href="../../requesting-data/data-request/">here</a> or you may upload your own data using the <a href="../../managing-data/data-transfer-app/">data transfer app</a>. In order to make a data request or upload your own data using the data transfer app, you must first <a href="../../accounts-and-billing/">create a St. Jude Cloud account</a>.</p>
</div>
<h2 id="writing-the-application">Writing the Application<a class="headerlink" href="#writing-the-application" title="Permanent link">&para;</a></h2>
<h3 id="requirements">Requirements<a class="headerlink" href="#requirements" title="Permanent link">&para;</a></h3>
<p><center></p>
<table>
<thead>
<tr>
<th>Tool</th>
<th>Download</th>
<th>Website</th>
<th>Version</th>
</tr>
</thead>
<tbody>
<tr>
<td>dx-toolkit</td>
<td><a href="https://documentation.dnanexus.com/downloads">Source</a></td>
<td><a href="https://www.dnanexus.com/">DNAnexus</a></td>
<td>v0.291.1</td>
</tr>
<tr>
<td>FastQC</td>
<td><a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/">Source</a></td>
<td><a href="https://www.bioinformatics.babraham.ac.uk/">Babraham Bioinformatics</a></td>
<td>v0.11.8</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>Installing the dx-toolkit requires Python to be installed locally. Using the system provided version of Python can be problematic for a number of reasons, so we recommend using the <a href="https://www.anaconda.com/distribution/">Anaconda</a> environment manager to install Python.</p>
<p>You can view the following guides for how to install conda on your system.</p>
<ul>
<li><strong>Windows.</strong> <a href="https://docs.anaconda.com/anaconda/install/windows/">https://docs.anaconda.com/anaconda/install/windows/</a></li>
<li><strong>Mac OS.</strong> <a href="https://docs.anaconda.com/anaconda/install/mac-os/">https://docs.anaconda.com/anaconda/install/mac-os/</a></li>
<li><strong>Linux.</strong> <a href="https://docs.anaconda.com/anaconda/install/linux/">https://docs.anaconda.com/anaconda/install/linux/</a></li>
</ul>
<p>Once you have conda installed, run the following commands to create a new environment with Python, activate it, and install the dx-toolkit.</p>
<div class="highlight"><pre><span></span><code>conda create -n dx <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.7
conda activate dx
pip install dxpy
</code></pre></div>

<p>Now whenever you want to develop something for the cloud using <code>dx-toolkit</code>, just open your terminal and type <code>conda activate dx</code>.</p>
<p>To access your DNAnexus projects from the commandline, you must login using <code>dx-toolkit</code>.
For users not affiliated with St. Jude, simply type <code>dx login</code> and enter your username and password when prompted.
Users with a St. Jude account will need to generate an API token for authentication.
Instructions can be found <a href="https://documentation.dnanexus.com/user/login-and-logout#authentication-tokens">here</a>.</p>
<h3 id="getting-started">Getting started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>The easiest way to install <code>dx-toolkit</code> is through <code>pip</code>, the Python package manager. Simply run the following command in your terminal:
<div class="highlight"><pre><span></span><code>pip install dxpy --upgrade
</code></pre></div></p>
<p>For this application, we will be using the <code>dx-app-wizard</code> command that is included in the <code>dx-toolkit</code>. <code>dx-app-wizard</code> is an interactive prompt that creates a boilerplate project that will allow you to quickly create an application. For more on <code>dx-app-wizard</code>, refer to the DNAnexus wiki article on <a href="https://documentation.dnanexus.com/developer/apps/intro-to-building-apps">Intro to Building Apps</a>. Before continuing, be sure to refer to the <a href="../command-line/">command line interaction page</a> for a walkthrough on how to install <a href="https://documentation.dnanexus.com/downloads#DNAnexus-Platform-SDK">dx-toolkit</a> and how to select your project workspace.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>It is not necessary to use <code>dx-app-wizard</code>. All the necessary files and project directory structure can be created manually. However, <code>dx-app-wizard</code> provides a quick and easy way to get started. For more information, refer to the <a href="https://documentation.dnanexus.com/developer/apps/advanced-app-tutorial">Advanced App Tutorial</a>.</p>
</div>
<p>All DNAnexus project applications will have the following structure:</p>
<div class="highlight"><pre><span></span><code>dx-fastqc-example-app/
├── dxapp.json
├── resources/
│   └── usr/
│       └── bin/
└── src/
    └── dx-fastqc-example-app.sh
</code></pre></div>

<p>The <code>dxapp.json</code> file is a JSON file that contains metadata about the application we are writing that are needed to build and run the app on the DNAnexus Platform. Most notably, you will need to specify all of the inputs your app requires (both input files or any settings you can tune), output files, and other options such as the number of cores and memory required to run the tool. To see the full list of fields, refer to the <a href="https://documentation.dnanexus.com/developer/apps/app-metadata">DNAnexus wiki</a> guide on the application metadata.</p>
<p>The <code>dx-fastqc-example-app.sh</code> file is a bash script is what will be executed when the application is run. Any executable binaries that accompany the application, such as other tools or scripts, are placed in the <code>resources</code> folder. From there, we can call the executable from within the app when it is run.</p>
<h2 id="creating-the-project">Creating the Project<a class="headerlink" href="#creating-the-project" title="Permanent link">&para;</a></h2>
<p>Start by running the <code>dx-app-wizard</code> command from your terminal.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>This helper tool will create a <strong>local</strong> directory on your machine. Any code changes we make will be done <em>inside</em> this local project directory created by <code>dx-app-wizard</code>. This is because we can write our application locally, <a href="../../guides/data/creating-a-cloud-app/#building-your-app">build the application</a>, and then <a href="../../guides/data/creating-a-cloud-app/#running-your-app">run the application</a> in the cloud.</p>
<p>Building the application will compile <code>dx-fastqc-example-app</code> and then upload it into the project space on the cloud. When we run an application, it will be submitted as a job to be run in the cloud. With this process, we can write the application locally and run it on our data in the cloud, without ever having to utilize personal bandwidth and compute time.</p>
</div>
<div class="highlight"><pre><span></span><code>$ dx-app-wizard
</code></pre></div>

<p>For our inputs, we will enter the following:</p>
<div class="highlight"><pre><span></span><code>$ App Name: dx-fastqc-example-app
...
$ Title <span class="o">[]</span>: FastQC Example Application
...
$ Summary <span class="o">[]</span>: Uses FastQC to generate quality control reports on raw sequence data.
...
$ Version <span class="o">[</span><span class="m">0</span>.0.1<span class="o">]</span>: <span class="m">0</span>.0.1
...
$ 1st input name <span class="o">(</span>&lt;ENTER&gt; to finish<span class="o">)</span>: bam_file
$ Label <span class="o">(</span>optional human-readable name<span class="o">)</span> <span class="o">[]</span>: BAM File
...
$ Choose a class <span class="o">(</span>&lt;TAB&gt; twice <span class="k">for</span> choices<span class="o">)</span>: file
$ This is an optional parameter <span class="o">[</span>y/n<span class="o">]</span>: n
...
$ 1st output name <span class="o">(</span>&lt;ENTER&gt; to finish<span class="o">)</span>: fastqc_html
$ Label <span class="o">(</span>optional human-readable name<span class="o">)</span> <span class="o">[]</span>: FastQC HTML Report
$ Choose a class <span class="o">(</span>&lt;TAB&gt; twice <span class="k">for</span> choices<span class="o">)</span>: file

$ 2nd output name <span class="o">(</span>&lt;ENTER&gt; to finish<span class="o">)</span>: fastqc_zip
$ Label <span class="o">(</span>optional human-readable name<span class="o">)</span> <span class="o">[]</span>: FastQC Zip File
$ Choose a class <span class="o">(</span>&lt;TAB&gt; twice <span class="k">for</span> choices<span class="o">)</span>: file
...
$ Timeout policy <span class="o">[</span>48h<span class="o">]</span>: 48h
...
$ Programming language: bash
...
$ Will this app need access to the Internet? <span class="o">[</span>y/N<span class="o">]</span>: N
...
$ Will this app need access to the parent project? <span class="o">[</span>y/N<span class="o">]</span>: y
...
$ Choose an instance <span class="nb">type</span> <span class="k">for</span> your app <span class="o">[</span>mem1_ssd1_x4<span class="o">]</span>: azure:mem1_ssd1_x4
</code></pre></div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Although our app doesn't need any Internet access in this example, it may be required for your project. Also be sure to check what instance type you will need in the <a href="https://documentation.dnanexus.com/developer/api/running-analyses/instance-types">API Specifications</a>.</p>
</div>
<p>The FastQC executable supports a variety of file formats (BAM, SAM, FastQ, etc.), and outputs a HTML report and a zip file that contains all the graphs and data. We will use that knowledge to write the input and output parameters for our application. We can also specify other parameters such as the timeout policy, programming language, and instance type. For more information, refer to the <a href="https://documentation.dnanexus.com/developer/api/running-analyses/io-and-run-specifications">IO and Run Specification</a> guide.</p>
<h2 id="integrating-tools-and-packages">Integrating Tools and Packages<a class="headerlink" href="#integrating-tools-and-packages" title="Permanent link">&para;</a></h2>
<p>Once we have finished creating the basic FastQC application using <code>dx-app-wizard</code>, the project structure should look like:</p>
<div class="highlight"><pre><span></span><code>dx-fastqc-example-app/
├── Readme.developer.md
├── Readme.md
├── dxapp.json
├── resources/
├── src/
│   └── dx-fastqc-example-app.sh
└── test/
</code></pre></div>

<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Anything in the resources folder is unpacked into the root directory (<code>/</code>) of the virtual Linux machine that your application will run on. If we create the directory path <code>dx-fastqc-example-app/resources/usr/bin/</code>, anything in the bin folder would be unpacked into <code>/usr/bin/</code> on the Linux machine. This is handy because that path is included in the default <code>$PATH</code> environment variable.</p>
<p>Your application's executable will use <code>/home/dnanexus/</code> as its current working directory.</p>
</div>
<p>Though <code>dx-app-wizard</code> does not create this, we can create it ourselves.  Paste the following lines into your terminal.</p>
<div class="highlight"><pre><span></span><code>$ mkdir -p dx-fastqc-example-app/resources/usr/bin
</code></pre></div>

<h2 id="packaging-fastqc">Packaging FastQC<a class="headerlink" href="#packaging-fastqc" title="Permanent link">&para;</a></h2>
<p>To incorporate FastQC into this project, we need to download the executable binary and package it within the <code>dx-fastqc-example-app</code>. Download the <a href="https://www.bioinformatics.babraham.ac.uk/projects/fastqc/fastqc_v0.11.8.zip">FastQC v0.11.8 (Win/Linux zip file)</a> and unzip it. After unzipping, move the FastQC folder into the <code>resources</code> folder.</p>
<div class="highlight"><pre><span></span><code>$ unzip fastqc_v0.11.8.zip
$ mv FastQC /path/to/project/dx-fastqc-example-app/resources/
</code></pre></div>

<p>Now, our project will look like this:
<div class="highlight"><pre><span></span><code>dx-fastqc-example-app/
├── LICENSE
├── README.md
├── Readme.developer.md
├── dxapp.json
├── test/
├── resources/
│   ├── FastQC/
│   │   ├── fastqc
│   │   └── ...
│   └── usr/
│       └── bin/
└── src/
    └── dx-fastqc-example-app.sh
</code></pre></div></p>
<h2 id="installing-dependencies">Installing Dependencies<a class="headerlink" href="#installing-dependencies" title="Permanent link">&para;</a></h2>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you are importing custom tools, or are using tools that rely on various packages and requirements, they can be specified in the "runSpec".</p>
<p>For more information on installing dependencies and available software packages, refer to the <a href="https://documentation.dnanexus.com/developer/apps/execution-environment">Execution Environment Reference</a>.</p>
</div>
<p>Some external package managers that we can leverage when building an app include:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Package Manager</th>
<th>Application</th>
</tr>
</thead>
<tbody>
<tr>
<td>APT</td>
<td>Advanced Packaging Tool for Ubuntu</td>
</tr>
<tr>
<td>CPAN</td>
<td>Comprehensive Perl Archive Network</td>
</tr>
<tr>
<td>CRAN</td>
<td>Comprehensive R Archive Network</td>
</tr>
<tr>
<td>gem</td>
<td>Package Manager for Ruby</td>
</tr>
<tr>
<td>pip</td>
<td>PyPI (Python Package Index)</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>One requirement for FastQC is that it must have a suitable <a href="https://www.java.com/en/">Java Runtime Environment</a>. To include this in the app, we have to edit the <code>dxapp.json</code> file. Open <code>dxapp.json</code> and append the following line to <code>"runSpec"</code>:</p>
<div class="highlight"><pre><span></span><code>  <span class="s2">&quot;execDepends&quot;</span><span class="err">:</span> <span class="p">[</span>
    <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;openjdk-7-jre-headless&quot;</span><span class="p">,</span>
     <span class="nt">&quot;package_manager&quot;</span><span class="p">:</span> <span class="s2">&quot;apt&quot;</span><span class="p">}</span>
  <span class="p">]</span>
</code></pre></div>

<p>Be sure to add a comma at the very end of the "file" object line to accommodate the new "execDepends" lines. Now, the <code>"runSpec"</code> object should look like the following:</p>
<div class="highlight"><pre><span></span><code>  <span class="err">...</span>
  <span class="s2">&quot;runSpec&quot;</span><span class="err">:</span> <span class="p">{</span>
    <span class="nt">&quot;timeoutPolicy&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;*&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;hours&quot;</span><span class="p">:</span> <span class="mi">48</span>
      <span class="p">}</span>
    <span class="p">},</span>
    <span class="nt">&quot;interpreter&quot;</span><span class="p">:</span> <span class="s2">&quot;bash&quot;</span><span class="p">,</span>
    <span class="nt">&quot;release&quot;</span><span class="p">:</span> <span class="s2">&quot;14.04&quot;</span><span class="p">,</span>
    <span class="nt">&quot;distribution&quot;</span><span class="p">:</span> <span class="s2">&quot;Ubuntu&quot;</span><span class="p">,</span>
    <span class="nt">&quot;file&quot;</span><span class="p">:</span> <span class="s2">&quot;src/dx-fastqc-example-app.sh&quot;</span><span class="p">,</span>
    <span class="nt">&quot;execDepends&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span><span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;openjdk-7-jre-headless&quot;</span><span class="p">,</span>
       <span class="nt">&quot;package_manager&quot;</span><span class="p">:</span> <span class="s2">&quot;apt&quot;</span><span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span><span class="err">,</span>
  <span class="err">...</span>
</code></pre></div>

<p>When you build and run your application, the virtual environment will now download <code>openjdk-7</code> from Ubuntu's APT package manager as a prerequisite. For more information on how to specify packages from Git, R, or Python, refer to the <a href="https://documentation.dnanexus.com/developer/apps/execution-environment#software-packages">Software Packages</a> wiki page.</p>
<h2 id="calling-fastqc">Calling FastQC<a class="headerlink" href="#calling-fastqc" title="Permanent link">&para;</a></h2>
<p>The last step is to call the FastQC executable from within the app. Open up <code>src/dx-fastqc-example-app.sh</code> with a text editor. Inside this Bash script is where we will be working with FastQC and our data. Before we dive in, its a good idea to add a few useful parameters for the script execution.</p>
<p>Right after the Bash shebang (<code>#!/bin/bash</code>), add the following line:</p>
<div class="highlight"><pre><span></span><code><span class="nb">set</span> -e -x
</code></pre></div>

<p>Below is a table describing what each flag does:</p>
<p><center></p>
<table>
<thead>
<tr>
<th>Flag</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>-e</td>
<td>Exit immediately if a command exits with a non-zero status.</td>
</tr>
<tr>
<td>-x</td>
<td>Print each command to standard error before execution.</td>
</tr>
</tbody>
</table>
<p></center></p>
<p>Our first change has to do with how our BAM file is downloaded. Although <code>dx-app-wizard</code> automatically generates a line that will download the input file and rename it, we want to keep the original file name because FastQC uses the input file as part of the report name. Remove the <code>-o bam_file</code> portion so the line looks like the following:</p>
<div class="highlight"><pre><span></span><code>dx download <span class="s2">&quot;</span><span class="nv">$bam_file</span><span class="s2">&quot;</span>       <span class="c1"># Downloads our input BAM file without renaming</span>
</code></pre></div>

<p>After the application downloads the input file, we need to create the appropriate output directories and run FastQC on our BAM file. Add the following lines to the bash script within the <code>main</code> function:</p>
<div class="highlight"><pre><span></span><code>mkdir ~/fastqc-out/                                    <span class="c1"># FastQC Output Folder</span>
/FastQC/fastqc <span class="s2">&quot;</span><span class="nv">$bam_file_name</span><span class="s2">&quot;</span> -o ~/fastqc-out        <span class="c1"># Runs FastQC on BAM File</span>
</code></pre></div>

<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Be sure to use <code>"$bam_file_name"</code> as our input for FastQC. Using <code>"$bam_file"</code> only returns the DNAnexus file-id associated with the input file.</p>
<p>For more information on helper variables, refer to the <a href="https://documentation.dnanexus.com/developer/apps/advanced-app-tutorial#set-output-name-using-bash-app-helper-variables">Advanced App Tutorial</a>.</p>
</div>
<h2 id="uploading-files">Uploading Files<a class="headerlink" href="#uploading-files" title="Permanent link">&para;</a></h2>
<p>After FastQC finishes, the last thing to do is to upload the reports generated by FastQC to our project. These virtual Linux machines are provisioned at-will, meaning that they are only spun up when a job is submitted. When we create an application and run it in the cloud, we submit it as a job to be executed. When a job gets executed, a virtual machine will download all the necessary requirements (tools, packages, data, etc.) and run the job. Any output files on the machine must be uploaded back to the project space after a job finishes executing. Any information and data not uploaded to the project space will be inaccessible and lost.</p>
<p>You will see two lines generated for us by <code>dx-app-wizard</code> when we specified the outputs for our application. We need to change these to upload the correct files from our output directory that we specified for FastQC. Otherwise, it assumes they are in the home directory. Before this, we can also (optionally) rename the files to be uploaded. Add the following lines, making sure to replace the two original upload lines.</p>
<p>Lines to remove/overwrite:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Generated by dx-app-wizard</span>
<span class="nv">fastqc_html</span><span class="o">=</span><span class="k">$(</span>dx upload fastqc_html --brief<span class="k">)</span>
<span class="nv">fastqc_zip</span><span class="o">=</span><span class="k">$(</span>dx upload fastqc_zip --brief<span class="k">)</span>
</code></pre></div>

<p>Lines to add:</p>
<div class="highlight"><pre><span></span><code><span class="c1"># (Optional) Renames the FastQC reports</span>
mv ~/fastqc-out/*.html ~/fastqc-out/fastqc-report.html
mv ~/fastqc-out/*.zip ~/fastqc-out/fastqc-report.zip

<span class="c1"># Uploads the respective HTML and Zip file (lines to change)</span>
<span class="nv">fastqc_html</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.html --brief<span class="k">)</span>
<span class="nv">fastqc_zip</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.zip --brief<span class="k">)</span>
</code></pre></div>

<p>In this step, we are also moving the HTML and Zip file generated by FastQC to the directories which will be uploaded.</p>
<p>After this step, <code>dx-fastqc-example-app.sh</code> should look like:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>

<span class="nb">set</span> -e -x

main<span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">&quot;Value of bam_file: &#39;</span><span class="nv">$bam_file</span><span class="s2">&#39;&quot;</span>

    <span class="c1"># Downloads file from project to virtual machine workspace</span>
    dx download <span class="s2">&quot;</span><span class="nv">$bam_file</span><span class="s2">&quot;</span>

    <span class="c1"># Creating output directory for FastQC</span>
    mkdir ~/fastqc-out

    <span class="c1"># Runs FastQC on BAM file</span>
    /FastQC/fastqc <span class="s2">&quot;</span><span class="nv">$bam_file_name</span><span class="s2">&quot;</span> -o ~/fastqc-out

    <span class="c1"># Renames the FastQC reports to include the BAM file prefix</span>
    mv ~/fastqc-out/*.html ~/fastqc-out/fastqc-report.html
    mv ~/fastqc-out/*.zip ~/fastqc-out/fastqc-report.zip

    <span class="c1"># Uploads the respective HTML and Zip file</span>
    <span class="nv">fastqc_html</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.html --brief<span class="k">)</span>
    <span class="nv">fastqc_zip</span><span class="o">=</span><span class="k">$(</span>dx upload ~/fastqc-out/fastqc-report.zip --brief<span class="k">)</span>

    <span class="c1"># Adds and formats appropriate output variables for your app</span>
    dx-jobutil-add-output fastqc_html <span class="s2">&quot;</span><span class="nv">$fastqc_html</span><span class="s2">&quot;</span> --class<span class="o">=</span>file
    dx-jobutil-add-output fastqc_zip <span class="s2">&quot;</span><span class="nv">$fastqc_zip</span><span class="s2">&quot;</span> --class<span class="o">=</span>file
<span class="o">}</span>
</code></pre></div>

<h2 id="building-your-app">Building Your App<a class="headerlink" href="#building-your-app" title="Permanent link">&para;</a></h2>
<p>Before building, ensure that you are in the parent directory of the <strong>local</strong> project folder generated by <code>dx-app-wizard</code>. To check, if you enter the command <code>ls</code>, you should see the project folder <code>dx-fastqc-example-app/</code> appear in the output.</p>
<p>To build your application, enter the following into your terminal:</p>
<div class="highlight"><pre><span></span><code>$ dx build dx-fastqc-example-app
</code></pre></div>

<p>This command will package the tools and files as an application which can then be run on the DNAnexus Platform. In the screenshot below, you can see the compiled app in our project workspace selected and highlighted in blue.</p>
<p>To verify that the build was completed successfully, you can enter <code>dx ls</code>. This should show you all the files in your project space in the cloud.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># This will show what files are in your root directory for your project space in the cloud</span>
$ dx ls
</code></pre></div>

<p>You should see something along the lines of this printed out in your terminal. Note that a compiled copy of our <code>dx-fastqc-example-app</code> now lives in the project.</p>
<div class="highlight"><pre><span></span><code>.
├── immediate/
│   └── ...
├── dx-fastqc-example-app
└── SAMPLE_INFO.txt
</code></pre></div>

<p>You can also <a href="https://platform.dnanexus.com/projects">view the project</a> directly from your browser. You will see a similar result.</p>
<p><img alt="" src="../../../../images/guides/genomics-platform/analyzing-data/creating-a-cloud-app-1.png" /></p>
<p>Any time you make any changes to the scripts or the application, you will need to rebuild the application. To overwrite a previous version of the app, specify the <code>-f</code> command.</p>
<p>You can also inspect and configure the application by clicking on it.</p>
<p><img alt="" src="../../../../images/guides/genomics-platform/analyzing-data/creating-a-cloud-app-2.png" /></p>
<h2 id="running-your-app">Running Your App<a class="headerlink" href="#running-your-app" title="Permanent link">&para;</a></h2>
<p>To run the <code>dx-fastqc-example-app</code>, enter the following into the terminal:</p>
<div class="highlight"><pre><span></span><code>$ dx run dx-fastqc-example-app -i <span class="nv">bam_file</span><span class="o">=</span>/path/to/&lt;bam-file&gt;.bam
</code></pre></div>

<p>For this example, I am using the PCGP dataset and my run command will look like the following:</p>
<div class="highlight"><pre><span></span><code>$ dx run dx-fastqc-example-app -i <span class="nv">bam_file</span><span class="o">=</span>/immediate/bam/SJBALL020073_D1.RNA-Seq.bam
</code></pre></div>

<p>The input path will vary depending on how the data looks inside your DNAnexus project, but it might look like the following: <code>/restricted/bam/&lt;bam-file&gt;.bam</code></p>
<p>You will be prompted to confirm that you wish to run the application with the following JSON input and whether you would like to monitor the job in your terminal.</p>
<div class="highlight"><pre><span></span><code>Using input JSON:
<span class="o">{</span>
    <span class="s2">&quot;bam_file&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;</span><span class="nv">$dnanexus_link</span><span class="s2">&quot;</span>: <span class="o">{</span>
            <span class="s2">&quot;project&quot;</span>: <span class="s2">&quot;project-FV9XFG0991ZbPVgQ2jx1vZv5&quot;</span>,
            <span class="s2">&quot;id&quot;</span>: <span class="s2">&quot;file-FV9gzf8991ZXQ1kv7V3BqgjV&quot;</span>
        <span class="o">}</span>
    <span class="o">}</span>
<span class="o">}</span>

Confirm running the executable with this input <span class="o">[</span>Y/n<span class="o">]</span>: Y
Calling applet-FVbY8Qj991ZQ1863BGK6x0bk with output destination project-FV9XFG0991ZbPVgQ2jx1vZv5:/

Job ID: job-FVbY8Z0991ZXx5v1Fk3QgJPV
Watch launched job now? <span class="o">[</span>Y/n<span class="o">]</span> Y

Job Log
-------
Watching job job-FVbY8Z0991ZXx5v1Fk3QgJPV. Press Ctrl+C to stop.
</code></pre></div>

<p>You can also monitor active jobs by going to the project space and selecting the "Monitor" tab.</p>
<p><img alt="" src="../../../../images/guides/genomics-platform/analyzing-data/creating-a-cloud-app-3.png" /></p>
<h2 id="job-completion">Job Completion<a class="headerlink" href="#job-completion" title="Permanent link">&para;</a></h2>
<p>Once the job finishes, you will receive an email from DNAnexus (<a href="mailto:notification@dnanexus.com">notification@dnanexus.com</a>) about whether the job has completed successfully or failed.</p>
<p>Make sure to check that these emails don't get sent to your spam folder.</p>
<p><img alt="" src="../../../../images/guides/genomics-platform/analyzing-data/creating-a-cloud-app-4.png" /></p>
<p>Clicking the links in the email should open up a new tab in your browser and take you to the appropriate project. Here, we can see that FastQC has run successfully and that the two files generated by FastQC have been uploaded back into our project space.</p>
<p><img alt="" src="../../../../images/guides/genomics-platform/analyzing-data/creating-a-cloud-app-5.png" /></p>
<p>Again, if we run the <code>dx ls</code> command, we can verify that two new files titled "fastqc-report.html" and "fastqc-report.zip" are in the root directory of our project.</p>
<div class="highlight"><pre><span></span><code>.
├── immediate/
│   └── ...
├── dx-fastqc-example-app
├── fastqc-report.html
├── fastqc-report.zip
└── SAMPLE_INFO.txt
</code></pre></div>

<h2 id="conclusion">Conclusion<a class="headerlink" href="#conclusion" title="Permanent link">&para;</a></h2>
<p>If you have made it this far, you have likely wrapped your first genomic analysis tool for use in the cloud. For your reference, we have included the final FastQC application at the <a href="https://github.com/stjudecloud/cloud-app-tutorial">St. Jude App Tutorial Repository</a>.</p>
<p>If you have any questions or suggestions on how we can improve this tutorial, please <a href="https://github.com/stjudecloud/docs/issues">file an issue</a>, contact us at <a href="https://stjude.cloud/contact">https://stjude.cloud/contact</a>, or email us at <a href="mailto:support@stjude.cloud">support@stjude.cloud</a>.</p>
<h2 id="similar-topics">Similar Topics<a class="headerlink" href="#similar-topics" title="Permanent link">&para;</a></h2>
<p><a href="../../requesting-data/about-our-data/">About our Data</a> <br />
<a href="../../requesting-data/data-request/">Making a Data Request</a> <br />
<a href="../../managing-data/working-with-our-data/">Working with our Data Overview</a>   <br />
<a href="../../managing-data/data-transfer-app/">Downloading/Uploading Data</a>   <br />
<a href="../command-line/">Command Line Interaction</a>  </p>
                
                  
                
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../mutational-signatures/" title="Mutational Signatures" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Mutational Signatures
              </span>
            </div>
          </a>
        
        
          <a href="../../../pecan/" title="Getting Started" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Getting Started
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020 St. Jude Children's Research Hospital
          </div>
        
        
        built from <a href="https://github.com/stjudecloud/docs/tree/7bc17fb">7bc17fb</a> using
        
        <a href="https://www.mkdocs.org">MkDocs</a>
        and a modified version of
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs
        </a>.
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../../../../assets/fonts/font-awesome.css">
    
      <a href="https://www.facebook.com/stjuderesearch/" target="_blank" rel="noopener" title="facebook" class="md-footer-social__link fa fa-facebook"></a>
    
      <a href="https://twitter.com/stjuderesearch?lang=en" target="_blank" rel="noopener" title="twitter" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://www.linkedin.com/company/st-jude-childrens-research-hospital" target="_blank" rel="noopener" title="linkedin" class="md-footer-social__link fa fa-linkedin"></a>
    
      <a href="https://github.com/stjude" target="_blank" rel="noopener" title="github" class="md-footer-social__link fa fa-github"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../../assets/javascripts/application.2d55c750.js"></script>
      
      <script>app.initialize({version:"1.1",url:{base:"../../../.."}})</script>
      
    
  </body>
</html>